\chapter{Riemann Pump Circuit design - Implementation of the Riemann Pump approach}

\label{ch:design}
\textit{Description of the approach you have taken to solve the scientific or technical problem which you were posed. Outline the design, the methodology and overall structure of your experimental approach}
A digitally controlled charge pump with eight different slopes is created, called Riemann Pump. To show that this pump is able to convert a digital signal into an analog one an example code is generated. As a MATLAB algorithm do not exists, which computes the Riemann Code, it is done by hand.
In fact of the high energy consumption, the realized DAC is designed for the integration in a base station. Because it converts a digital bit sequence into an analog rf signal it is implemented in the transmitting path. Based on the idea of a push-pull stage the load impedance of the charge pump is designed first.
\section{Approach and implementation of the Riemann Pump}
The concept of the Riemann Pump as seen in Fig. \ref{fig:RiemannPumpConcept} is realised with the design tool ADS.

\begin{figure}[ht]
	\centering
  \includegraphics[width=1\textwidth]{Active_PullUp3.png}
	\caption{Schematic of a driver circuit with push-pull stage representing one bit of the DAC called Riemann Pump}
	\label{RiemannPump}
\end{figure}

The first approach of designing a Riemann Pump was with a concept of a Push-Pull stage. This push-pull stage should charge a capacitive load at the output, which is the same as a normal charge pump. Push-pull stages complementary switch a high- and lowside transistor as in a charge pump. This was one possible approach. Concept of Maksimovic. 
\section{Calculation of the load impedance}
The transistor model \gls{ab:hemt} (IAF GE MSL A204/IAF GaN25 HEMT CS LS SHfull) used in \gls{ab:ads} were modelled at the \gls{ab:iaf}.
\textbf{Max Gain with output amp - to tune the quiescent point, get the right impdenace}
Based on the idea to design  a DAC for the transmitting path of a base station, a pre-power amplifier is taken to calculate the load impedance. The first assumption is that the load is a pre-power amplifier which generate a power of \SI{20}{\watt}. To generate this power, the gate periphery of a GaN25 HEMT has to be \SI{4}{\milli \metre} based on the approximation(- official reference???) \SI[per-mode=fraction]{5}{\watt\per\milli\metre}. To get this gate periphery four transistor in parallel each with 8 finger and \SI{125}{\micro \metre} are designed for the power amplifier. The bias point is determined with the MAG. Therefore the following load impedance could be determined.
\begin{equation}
Z = R - jX_c
\end{equation}

In the smith chart Fig. \ref{fig:smith_load_impedance} it is shown that the input impedance of the load is capacitive. The real part of the impedance is roughly $R = \SI{1.89}{\ohm}$, while the imaginary part is capacitive. An important point is the input capacitance is increasing with frequency. While it is normal that the imaginary part of the impedance is increasing with frequency, the input capacitance is not.

 \begin{figure}[ht]
	\centering
  \includegraphics[width=1\textwidth]{S_param_LoadImpedance.pdf}
	\caption{smith chart representing the load impedance}
	\label{fig:smith_load_impedance}
\end{figure}

The input capacitance is calculated through the impedance with:
\begin{equation}
imag[Z_{in}] = X_c
\end{equation}

\begin{equation}
imag[Z_{in}] = \frac{1}{\omega C}
\end{equation}

\begin{equation}
imag[Z_{in}] = \frac{1}{2 \pi f C}
\end{equation}

\begin{equation}
C = \frac{1}{2 \pi f imag[Z_{in}]}
\end{equation}

 \begin{figure}[ht]
	\centering
  \includegraphics[width=0.5\textwidth]{InputCap_LoadImpedance_6GHz.pdf}
	\caption{frequency dependent input capacitance of the load}
	\label{fig:smith_load_impedance_inC}
\end{figure}
\section{Dimension of the used components}
The transistor dimension were... Different for driver circuit and power circuit... resistor to reduce the energy  consumption, for higher efficiency. \\ The
approach of the push-pull stage Maksimovic, Maroldt.\\
Approach of theoretical and synthesized signal -> MatLab generation of Riemanncode, SNR.\\ Stability, driver concept, energy consumption, frequency bandwidth, gain
Schematic design in Advanced Design System 2014. concept, ideas... 
\textbf{length of the bonds, number of bonds, thickness of bonds ask Dirk Meder. A lot of vias - more inductance - voltage drop between layers. short as possible lines, no rechtecke - para caps in the edge. first filter cap to supply pin near the chip. number and cap size determined on experience. }\\
Control voltage of 5 V realization with OPAMPS? Possible to overdrive opamps instead of using broadband ppa. 


\section{summary - challenges to review - problems}
Same realisation problems, difficulties: Problem of BANDWIDTH, Vpp of control signal (5V pp for GaN transistors), high side driver, no complementary transistors available in III-V technology, low loss driver, high speed driver, digital control driver, too high energy consumption (stability???)
\section{Discussion}
\textbf{bandwidth limitation}
\textit{The lower bound is determined by the sampling time (inverse of the sampling frequency) and the smallest current achieved with the dimensioned transistors.
 The smallest achievable current times the smallest sampling time (highest sampling frequency) determine the smallest absolute slope achievable. \\
 \textbf{Is every signal possible to create?$\rightarrow$ a rect signal has too steep flanks to create. The signal bandwidth ranges from DC to 6 GHz but what is the amplitude range? Is there a limitation regarding the amplitude?}
\\
The smallest current is determined by the dimension of the transistor, which drives into saturation. 
The smallest saturated current is determined by the push-pull transistor geometry, here: 532 mA.}